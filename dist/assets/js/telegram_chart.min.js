var chart=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chart=t,this.elem=null,this.elemTitle=null,this.title="",this.setTitle(i.title)}var t,i,s;return t=e,(i=[{key:"setTitle",value:function(e){this.title=e}},{key:"render",value:function(){this.elem||(this.elem=this.chart.elem.querySelector(".header")),this.elemTitle||(this.elemTitle=this.elem.querySelector(".title")),this.elemTitle.textContent=this.title}}])&&n(t.prototype,i),s&&n(t,s),e}();function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,i,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewport=t,this.elem=null,this.elemValues=null,this.elemGrid=null,this.name=i,this.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.digits=["","K","M"]}var t,i,n;return t=e,(i=[{key:"formatValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("x"==this.name){var i=new Date(e);return t?this.days[i.getDay()]+", "+this.months[i.getMonth()]+" "+i.getDate():this.months[i.getMonth()]+" "+i.getDate()}if(t)return e;var n=e,s=0;for(s=0;s<this.digits.length&&!(n/1e3<1);s++)n/=1e3;return n+this.digits[s]}},{key:"_getRealEndX",value:function(){return this.viewport.pointStart.x+Math.ceil((this.viewport.pointEnd.x-this.viewport.pointStart.x)/this.viewport.step.x)*this.viewport.step.x}},{key:"_setAxisWidth",value:function(){var e=this.viewport.pointStart.x,t=this.viewport.pointEnd.x,i=this._getRealEndX();this.elem.style.right=-100*(i-t)/(t-e)+"%"}},{key:"_prepareNewElements",value:function(){var e={},t=this.viewport.pointStart[this.name],i=this.viewport.pointEnd[this.name],n=this.viewport.step[this.name],s=null,r=null;"x"==this.name&&(i=this._getRealEndX());for(var l=t;l<=i;l+=n)(s=document.createElement("div")).className="value",s.dataset.value=l,s.textContent=this.formatValue(l),"y"==this.name&&((r=document.createElement("div")).className="line",s.style.top=this.viewport.pointToPlotY(l)+"px",r.style.top=this.viewport.pointToPlotY(l)+"px"),e[l]={elemValue:s,elemLine:r};return e}},{key:"render",value:function(){this.elem||(this.elem=this.viewport.elem.querySelector(".axis-"+this.name)),this.elemValues||(this.elemValues=this.elem.querySelector(".values")),this.elemGrid||(this.elemGrid=this.elem.querySelector(".grid")),"x"==this.name&&this._setAxisWidth();var e=this._prepareNewElements();for(var t in this.elemValues.innerHTML="",this.elemGrid.innerHTML="",e)e[t].elemValue&&this.elemValues.appendChild(e[t].elemValue),e[t].elemLine&&this.elemGrid.appendChild(e[t].elemLine)}}])&&r(t.prototype,i),n&&r(t,n),e}();function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewport=t,this.elem=null,this.elemHintPoint=null,this.color=i.color,this.type=i.type,this.enable=!0,this.name=i.name,this.points=i.points,this.pointsIndexed=void 0,this.hintPoint=void 0,this._calcPointsIndexed()}var t,i,n;return t=e,(i=[{key:"enable",value:function(){this.enable=!0}},{key:"disable",value:function(){this.enable=!1}},{key:"toggle",value:function(){this.enable=!this.enable}},{key:"_calcPointsIndexed",value:function(){this.pointsIndexed={};for(var e=0;e<this.points.length;e++)this.pointsIndexed[this.points[e].x]=this.points[e].y}},{key:"getPointByX",value:function(e){var t=this.pointsIndexed[e];return t?{x:e,y:t}:{}}},{key:"renderHintPoint",value:function(){this.elemHintPoint&&(this.enable&&this.hintPoint?(this.elemHintPoint.setAttributeNS(null,"cx",this.viewport.pointToViewportX(this.hintPoint.x)),this.elemHintPoint.setAttributeNS(null,"cy",this.viewport.pointToViewportY(this.hintPoint.y)),this.elemHintPoint.setAttributeNS(null,"opacity",1)):this.elemHintPoint.setAttributeNS(null,"opacity",0))}},{key:"render",value:function(){this.elem||(this.elem=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.elem.setAttributeNS(null,"stroke",this.color),this.viewport.elemSvg.appendChild(this.elem)),this.elemHintPoint||(this.elemHintPoint=document.createElementNS("http://www.w3.org/2000/svg","circle"),this.elemHintPoint.setAttributeNS(null,"r",4),this.elemHintPoint.setAttributeNS(null,"stroke",this.color),this.viewport.elemSvg.appendChild(this.elemHintPoint));var e=this.enable?1:0,t=this,i=this.points.reduce(function(e,i){return e+t.viewport.pointToViewportX(i.x)+", "+t.viewport.pointToViewportY(i.y)+" "},"");this.elem.setAttributeNS(null,"opacity",e),this.elem.setAttributeNS(null,"points",i),this.renderHintPoint()}}])&&o(t.prototype,i),n&&o(t,n),e}();function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t,i){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chart=t,this.elem=null,this.elemPlot=null,this.elemSvg=null,this.elemHint=null,this.config=i.axis,this.globalPointStart={x:i.axis.x.minValue,y:i.axis.y.minValue},this.globalPointEnd={x:i.axis.x.maxValue,y:i.axis.y.maxValue},this.pointStart={x:i.axis.x.minValue,y:i.axis.y.minValue},this.pointEnd={x:i.axis.x.maxValue,y:i.axis.y.maxValue},this.step={x:i.axis.x.step,y:i.axis.y.step},this.viewbox={start:i.viewbox.start,end:i.viewbox.end},this.items=[],i.chart.columns)this.addItem({points:this._getPointsByRowColumn(i.chart.row,i.chart.columns[n]),color:i.chart.colors[n],type:i.chart.types[n],name:i.chart.names[n]});this.allPointsX=i.chart.row,this._globalReset(),this.axisX=new l(this,"x",i),this.axisY=new l(this,"y",i)}var t,i,n;return t=e,(i=[{key:"pointToViewportX",value:function(e){return(e-this.pointStart.x)/(this.pointEnd.x-this.pointStart.x)*this.elem.clientWidth}},{key:"pointToViewportY",value:function(e){return(1-(e-this.pointStart.y)/(this.pointEnd.y-this.pointStart.y))*this.elem.clientHeight}},{key:"pointToPlotX",value:function(e){return(e-this.pointStart.x)/(this.pointEnd.x-this.pointStart.x)*this.elemPlot.clientWidth}},{key:"pointToPlotY",value:function(e){return(1-(e-this.pointStart.y)/(this.pointEnd.y-this.pointStart.y))*this.elemPlot.clientHeight}},{key:"plotToPointX",value:function(e){return this.pointStart.x+e/this.elemPlot.clientWidth*(this.pointEnd.x-this.pointStart.x)}},{key:"_getPointsByRowColumn",value:function(e,t){for(var i=[],n=Math.min(e.length,t.length),s=1;s<n;s++)i.push({x:e[s],y:t[s]});return i}},{key:"addItem",value:function(e){this.items.push(new a(this,e)),this._reset()}},{key:"enableItem",value:function(e){e<this.items.length&&(this.items[e].enable(),this._reset())}},{key:"disableItem",value:function(e){e<this.items.length&&(this.items[e].disable(),this._reset())}},{key:"toggleItem",value:function(e){e<this.items.length&&(this.items[e].toggle(),this._reset())}},{key:"setPointsRange",value:function(e,t){this.pointStart=e,this.pointEnd=t,this._reset()}},{key:"_getKeyPoint",value:function(e,t,i,n){var s=i,r=n?0:this.viewbox.start,l=n?1:this.viewbox.end;return null==s&&(s=Math[e].apply(Math,this.items.filter(function(e){return e.enable}).map(function(i){var n=[];if(h(n,i.points),"y"==t){var s=n.length,o=Math.round(s*r),a=Math.round(s*l);n.splice(a),n.splice(0,o)}return Math[e].apply(Math,n.map(function(e){return e[t]}))}))),s==1/0&&(s=0),s}},{key:"_getDefaultStepX",value:function(e,t,i,n){var s=n;if(null!=s&&s!=1/0)return reslult;var r=Math.ceil(this.chart.elem.clientWidth/50),l=(t-e)*(i.end-i.start);return s=864e5*Math.ceil(l/864e5/r)}},{key:"_getDefaultStepY",value:function(e,t,i){var n=i;if(null!=n&&n!=1/0)return reslult;if(t-e==1)return 1;var s=t-e,r=+(""+s).substring(0,2),l=(""+s).length;return n=r>60?10:r>10?5:1,n*=Math.pow(10,l-2)}},{key:"setStepX",value:function(){this.step.x=this._getDefaultStepX(this.pointStart.x,this.pointEnd.x,this.viewbox,this.config.x.step)}},{key:"setStepY",value:function(){this.step.y=this._getDefaultStepY(this.pointStart.y,this.pointEnd.y,this.config.y.step)}},{key:"getClosestPointXByX",value:function(e){var t=this.allPointsX.length;if(0==t)return{};if(1==t)return this.allPointsX[0];for(var i=0,n=t;n-i>1;){var s=i+Math.round((n-i)/2),r=e-this.allPointsX[s];if(r>0)i=s;else{if(!(r<0))return e;n=s}}return e-this.allPointsX[i]<this.allPointsX[n]-e?this.allPointsX[i]:this.allPointsX[n]}},{key:"bodyHint",value:function(e){for(var t="",i=0;i<this.items.length;i++){var n=this.items[i];if(0!=n.enable){var s=n.getPointByX(e);t+="<div class='hint-col' style='color:"+n.color+"'><div>"+this.axisY.formatValue(s.y,!0)+"</div><div>"+this.items[i].name+"</div></div>"}}return"<div class='hint-header'>"+this.axisX.formatValue(e,!0)+"</div><div class='hint-body'>"+t+"</div>"}},{key:"getMaxPointY",value:function(e){for(var t=void 0,i=0;i<this.items.length;i++)0!=this.items[i].enable&&(t=null==t?this.items[i].pointsIndexed[e]:Math.max(t,this.items[i].pointsIndexed[e]));return t}},{key:"showHint",value:function(e){var t=e-this.elemPlot.getBoundingClientRect().left,i=this.plotToPointX(t),n=this.getClosestPointXByX(i),s=this.pointToPlotX(n);if(null!=n&&!(s<0)){for(var r=0;r<this.items.length;r++)this.items[r].hintPoint=this.items[r].getPointByX(n),this.items[r].renderHintPoint();this.elemHint.className="hint",this.elemHint.querySelector(".hint-line").style.left=s+"px";var l=this.elemHint.querySelector(".hint-message");l.innerHTML=this.bodyHint(n);var o=this.getMaxPointY(n),a=this.pointToPlotY(o);t=Math.max(s-25,this.elemHint.clientWidth*this.viewbox.start),t=Math.min(t,this.elemHint.clientWidth*this.viewbox.end-l.offsetWidth-10);var h=-10;h+l.offsetHeight>a&&(h=a+10),l.style.left=t+"px",l.style.top=h+"px"}}},{key:"hideHint",value:function(){this.elemHint.className="hint hidden";for(var e=0;e<this.items.length;e++)this.items[e].hintPoint=void 0,this.items[e].renderHintPoint()}},{key:"_globalReset",value:function(){this.globalPointStart.x=this._getKeyPoint("min","x",this.config.x.min,!0),this.globalPointStart.y=this._getKeyPoint("min","y",this.config.y.min,!0),this.globalPointEnd.x=this._getKeyPoint("max","x",this.config.x.max,!0),this.globalPointEnd.y=this._getKeyPoint("max","y",this.config.y.max,!0)}},{key:"_reset",value:function(){this.pointStart.x=this._getKeyPoint("min","x",this.config.x.min),this.pointStart.y=this._getKeyPoint("min","y",this.config.y.min),this.pointEnd.x=this._getKeyPoint("max","x",this.config.x.max),this.pointEnd.y=this._getKeyPoint("max","y",this.config.y.max),this.pointEnd.x<=this.pointStart.x&&(this.pointEnd.x=this.pointStart.x+1),this.pointEnd.y<=this.pointStart.y&&(this.pointEnd.y=this.pointStart.y+1),this.setStepX(),this.setStepY(),this.pointStart.y=Math.floor(this.pointStart.y/this.step.y)*this.step.y,this.pointEnd.y=Math.ceil(this.pointEnd.y/this.step.y)*this.step.y}},{key:"setViewbox",value:function(e){this.viewbox.start=e.start,this.viewbox.end=e.end,this.viewbox.start>=.99&&(this.viewbox.start=.99),this.viewbox.end==this.viewbox.start&&(this.viewbox.end=this.viewbox.start+.01),this._reset()}},{key:"renderAxisX",value:function(){this.axisX.render()}},{key:"renderAxisY",value:function(){this.axisY.render()}},{key:"renderViewbox",value:function(){this.elem.style.left=-100*this.viewbox.start/(this.viewbox.end-this.viewbox.start)+"%",this.elem.style.width=100/(this.viewbox.end-this.viewbox.start)+"%",this.axisY.elem.style.left=100*this.viewbox.start+"%",this.hideHint(),this.setStepX(),this.renderAxisX()}},{key:"renderItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.elemSvg.setAttribute("viewBox","0 0 "+this.elem.clientWidth+" "+this.elem.clientHeight),this.items.forEach(function(t){t.render(e)})}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.elem){this.elem=this.chart.elem.querySelector(".viewport");var t=this;this.elem.addEventListener("mousemove",function(e){e.preventDefault(),t.elem.contains(e.target)&&t.showHint(e.clientX)}),this.elem.addEventListener("mouseleave",function(e){e.preventDefault(),e.target==t.elem&&t.hideHint()})}this.elemPlot||(this.elemPlot=this.elem.querySelector(".plot")),this.elemSvg||(this.elemSvg=this.elemPlot.querySelector(".plot-svg"),this.elemSvg.setAttribute("preserveAspectRatio","none")),this.elemHint||(this.elemHint=this.chart.elem.querySelector(".hint")),this.renderAxisX(),this.renderAxisY(),this.renderViewbox(),this.renderItems(e)}}])&&u(t.prototype,i),n&&u(t,n),e}();function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.preview=t,this.elem=null,this.elemPreviewLeft=null,this.elemPreviewRight=null,this.elemSliderLeft=null,this.elemSliderRight=null,this.start=i.start,this.end=i.end,this._previewCoords=null,this._shiftX=null,this._MIN_SLIDER_WIDTH=25,this._onDocumentMouseMove=this.__onDocumentMouseMove.bind(this),this._onDocumentMouseUp=this.__onDocumentMouseUp.bind(this),this._elemDrag=null}var t,i,n;return t=e,(i=[{key:"_startDrag",value:function(e){this._elemDrag=e.target,this._touch=e.touches,this._shiftX=e.clientX||e.touches[0].clientX,this._shiftX-=this._elemDrag.getBoundingClientRect().left,this._previewCoords=this.preview.elem.getBoundingClientRect(),document.addEventListener("mousemove",this._onDocumentMouseMove),document.addEventListener("mouseup",this._onDocumentMouseUp),document.addEventListener("touchmove",this._onDocumentMouseMove,{passive:!1}),document.addEventListener("touchend",this._onDocumentMouseUp,{passive:!1}),document.addEventListener("touchcancel",this._onDocumentMouseUp,{passive:!1})}},{key:"_endDrag",value:function(){document.removeEventListener("mousemove",this._onDocumentMouseMove),document.removeEventListener("mouseup",this._onDocumentMouseUp),document.removeEventListener("touchmove",this._onDocumentMouseMove),document.removeEventListener("touchend",this._onDocumentMouseUp),document.removeEventListener("touchcancel",this._onDocumentMouseUp)}},{key:"__onDocumentMouseMove",value:function(e){e.preventDefault();var t=e.clientX||e.touches[0].clientX;this._moveTo(t)}},{key:"__onDocumentMouseUp",value:function(e){e.preventDefault(),this._endDrag()}},{key:"_getLimitedValue",value:function(e,t,i){var n=Math.max(e,t);return n=Math.min(n,i)}},{key:"_moveTo",value:function(e){var t=e-this._previewCoords.left-this._shiftX,i=this.start,n=this.end;if(this._elemDrag.classList.contains("slider-left"))i=this._getLimitedValue(t,0,this.elem.offsetLeft+this.elem.offsetWidth-this._MIN_SLIDER_WIDTH)/this.preview.elem.clientWidth;else if(this._elemDrag.classList.contains("slider-right"))n=this._getLimitedValue(t+this._elemDrag.offsetWidth,this.elem.offsetLeft+this._MIN_SLIDER_WIDTH,this.preview.elem.clientWidth)/this.preview.elem.clientWidth;else{var s=this._getLimitedValue(t,0,this.preview.elem.clientWidth-this._elemDrag.offsetWidth);i=s/this.preview.elem.clientWidth,n=(s+this._elemDrag.offsetWidth)/this.preview.elem.clientWidth}this.setViewbox({start:Math.round(1e3*i)/1e3,end:Math.round(1e3*n)/1e3}),this.render(),this.preview.chart.viewport.setViewbox({start:this.start,end:this.end}),this.preview.chart.viewport.render(!0)}},{key:"setViewbox",value:function(e){this.start=e.start,this.end=e.end}},{key:"render",value:function(){var e=this;this.elem||(this.elem=this.preview.elem.querySelector(".slider"),this.elem.addEventListener("mousedown",function(t){return t.preventDefault(),e._startDrag(event),!1}),this.elem.addEventListener("touchstart",function(t){return t.preventDefault(),e._startDrag(event),!1},{passive:!1})),this.elemSliderLeft||(this.elemSliderLeft=this.preview.elem.querySelector(".slider-left"),this.elemSliderLeft.addEventListener("touchstart",function(t){return t.preventDefault(),e._startDrag(event),!1},{passive:!1})),this.elemSlideright||(this.elemSliderRight=this.preview.elem.querySelector(".slider-right"),this.elemSliderRight.addEventListener("touchstart",function(t){return t.preventDefault(),e._startDrag(event),!1},{passive:!1})),this.elemPreviewLeft||(this.elemPreviewLeft=this.preview.elem.querySelector(".preview-left")),this.elemPreviewRight||(this.elemPreviewRight=this.preview.elem.querySelector(".preview-right")),this.elem.style.left=100*this.start+"%",this.elem.style.width=100*(this.end-this.start)+"%",this.elemPreviewLeft.style.width=100*this.start+"%",this.elemPreviewRight.style.left=100*this.end+"%"}}])&&v(t.prototype,i),n&&v(t,n),e}();function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.preview=t,this.viewport=t.chart.viewport,this.line=i,this.elem=null}var t,i,n;return t=e,(i=[{key:"svgX",value:function(e){return(e-this.viewport.globalPointStart.x)/(this.viewport.globalPointEnd.x-this.viewport.globalPointStart.x)*this.preview.elem.clientWidth}},{key:"svgY",value:function(e){return(1-(e-this.viewport.globalPointStart.y)/(this.viewport.globalPointEnd.y-this.viewport.globalPointStart.y))*this.preview.elem.clientHeight}},{key:"render",value:function(){if(this.line.enable){this.elem||(this.elem=document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.preview.elemSvg.appendChild(this.elem));var e=this,t=this.line.points.reduce(function(t,i){return t+e.svgX(i.x)+","+e.svgY(i.y)+" "},"");this.elem.setAttributeNS(null,"points",t),this.elem.style.stroke=this.line.color}else this.elem&&(this.elem.remove(),this.elem=null)}}])&&d(t.prototype,i),n&&d(t,n),e}();function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chart=t,this.elem=null,this.elemSvg=null,this.slider=new m(this,{start:t.viewport.viewbox.start,end:t.viewport.viewbox.end})}var t,i,n;return t=e,(i=[{key:"renderSlider",value:function(){this.slider.render()}},{key:"renderItems",value:function(){this.elemSvg.innerHTML="",this.elemSvg.setAttribute("viewBox","0 0 "+this.elem.clientWidth+" "+this.elem.clientHeight);var e=this;this.chart.viewport.items.forEach(function(t){new p(e,t).render()})}},{key:"render",value:function(){this.elem||(this.elem=this.chart.elem.querySelector(".preview")),this.elemSvg||(this.elemSvg=this.chart.elem.querySelector(".preview-svg"),this.elemSvg.setAttribute("preserveAspectRatio","none")),this.renderItems(),this.renderSlider()}}])&&f(t.prototype,i),n&&f(t,n),e}();function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var w=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labels=t,this.elem=null,this.name=i.name,this.enable=i.enable,this.color=i.color,this.index=this.labels.items.length}var t,i,n;return t=e,(i=[{key:"enable",value:function(){this.enable=!0}},{key:"disable",value:function(){this.enable=!1}},{key:"toggle",value:function(){this.enable=!this.enable}},{key:"render",value:function(){if(!this.elem){this.elem=document.createElement("div"),this.labels.elem.appendChild(this.elem);var e=this;this.elem.addEventListener("click",function(t){e.labels.chart.toggleSeries(e.index)})}this.elem.className="label"+(this.enable?" enable":""),this.elem.innerHTML="<i class='zmdi' style='background:"+(this.enable?this.color:"none")+"'></i>"+this.name}}])&&g(t.prototype,i),n&&g(t,n),e}();function x(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(){function e(t,i){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chart=t,this.elem=null,this.items=[],i.chart.columns)this.addItem({name:i.chart.names[n],color:i.chart.colors[n],enable:!0})}var t,i,n;return t=e,(i=[{key:"addItem",value:function(e){this.items.push(new w(this,e))}},{key:"deleteItem",value:function(e){e<this.items.length&&(this.items[e].elem&&this.items[e].elem.delete(),this.items.splice(e,1))}},{key:"deleteItems",value:function(e){this.items.foreach(function(e){e.elem&&e.elem.delete()}),this.items=[]}},{key:"enableItem",value:function(e){e<this.items.length&&this.items[e].enable()}},{key:"disableItem",value:function(e){e<this.items.length&&this.items[e].disable()}},{key:"toggleItem",value:function(e){e<this.items.length&&this.items[e].toggle()}},{key:"renderItem",value:function(e){e<this.items.length&&this.items[e].render()}},{key:"render",value:function(){this.elem||(this.elem=this.chart.elem.querySelector(".labels"));var e=this;this.items.forEach(function(t){e.renderItem(t.index)})}}])&&x(t.prototype,i),n&&x(t,n),e}();function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function S(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("chart constructor started"),this.elem=null,this.className="chart",this.elemTheme=null,this.header=null,this.viewport=null,this.preview=null,this.labels=null;var i=this.loadParams(t);if(this.elem=document.getElementById(i.id),this.elem){this.throttleEvent("resize","optimizedResize");var n=this;window.addEventListener("optimizedResize",function(){n.render()}),this.loadTemplate(),this.header=new s(this,i),this.viewport=new c(this,i),this.preview=new y(this,i),this.labels=new b(this,i),this.theme=i.theme,this.animate=!1,this.animateDuration=1.3,this.render()}else console.log("Element with id='"+i.id+"' not found")}var t,i,n;return t=e,(i=[{key:"loadTemplate",value:function(){this.elem.innerHTML='\n\t\t\t<div class="header">\n\t\t\t\t<h3 class="title"></h3>\n\t\t\t</div>\n\t\t\t<div class="viewport-window">\n\t\t\t\t<div class="viewport">\n\t\t\t\t\t<div class="hint hidden">\n\t\t\t\t\t\t<div class="hint-line"></div>\n\t\t\t\t\t\t<div class="hint-message"></div>\n\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t<div class="axis-x">\n\t\t\t\t\t\t<div class="values"></div>\n\t\t\t\t\t\t<div class="grid"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="axis-y">\n\t\t\t\t\t\t<div class="values"></div>\n\t\t\t\t\t\t<div class="grid"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="plot">\n\t\t\t\t\t\t<svg class="plot-svg"></svg>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="preview">\n\t\t\t\t<svg class="preview-svg"></svg>\n\t\t\t\t<div class="preview-left"></div>\n\t\t\t\t<div class="preview-right"></div>\n\t\t\t\t<div class="slider">\n\t\t\t\t\t<div class="slider-left"></div>\n\t\t\t\t\t<div class="slider-right"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="labels"></div>\n\t\t\t<div class=\'theme-container\'><div class="theme-switcher"></div></div>\n\t\t\t'}},{key:"extendParam",value:function(e,t){return null!=e?e:t}},{key:"throttleEvent",value:function(e,t,i){i=i||window;var n=!1;i.addEventListener(e,function(){n||(n=!0,requestAnimationFrame(function(){i.dispatchEvent(new CustomEvent(t)),n=!1}))})}},{key:"_getColumnXName",value:function(e){for(var t in e)if("x"==e[t])return t;return""}},{key:"_getPointsByRowColumn",value:function(e,t){for(var i=[],n=Math.min(e.length,t.length),s=1;s<n;s++)i.push({x:e[s],y:t[s]});return i}},{key:"loadParams",value:function(e){var t=[];t.push("#76eb00"),t.push("#e60000");var i={};P(i,e),i.title=this.extendParam(i.title,"Chart");for(var n={},s=[],r=this._getColumnXName(i.chart.types),l=0;l<i.chart.columns.length;l++){var o=i.chart.columns[l][0],a=[];P(a,i.chart.columns[l]),a.splice(0,1),o==r?s=a:n[o]=a}return i.chart.row=s,i.chart.rowName=r,i.chart.columns=n,i.axis||(i.axis={}),i.axis.x||(i.axis.x={}),i.axis.x.min=this.extendParam(i.axis.x.min,void 0),i.axis.x.max=this.extendParam(i.axis.x.max,void 0),i.axis.x.step=this.extendParam(i.axis.x.step,void 0),i.axis.y||(i.axis.y={}),i.axis.y.min=this.extendParam(i.axis.y.min,void 0),i.axis.y.max=this.extendParam(i.axis.y.max,void 0),i.axis.y.step=this.extendParam(i.axis.y.step,void 0),i.viewbox||(i.viewbox={}),i.viewbox.start=this.extendParam(i.viewbox.start,0),i.viewbox.end=this.extendParam(i.viewbox.end,1),i.theme=this.extendParam(i.theme,0),i}},{key:"enableSeries",value:function(e){this.labels.enableItem(e),this.viewport.enableItem(e),this.renderLabel(e),this.renderViewport(!0),this.renderPreview()}},{key:"disableSeries",value:function(e){this.labels.disableItem(e),this.viewport.disableItem(e),this.renderLabel(e),this.renderViewport(!0),this.renderPreview()}},{key:"toggleSeries",value:function(e){this.labels.toggleItem(e),this.viewport.toggleItem(e),this.renderLabel(e),this.renderViewport(!0),this.renderPreview()}},{key:"toggleTheme",value:function(){this.theme=this.theme?0:1,this.renderTheme()}},{key:"setViewbox",value:function(e){this.viewport.setViewbox(e),this.renderViewport()}},{key:"renderTheme",value:function(){if(!this.elemTheme){this.elemTheme=this.elem.querySelector(".theme-switcher");var e=this;this.elemTheme.addEventListener("click",function(){e.toggleTheme()})}0==this.theme?(this.elem.className=this.className,this.elemTheme.innerHTML="Switch to Night Mode"):(this.elem.className=this.className+" night",this.elemTheme.innerHTML="Switch to Day Mode")}},{key:"renderHeader",value:function(){this.header.render()}},{key:"renderLabels",value:function(){this.labels.render()}},{key:"renderViewport",value:function(){this.viewport.render()}},{key:"renderLabel",value:function(e){this.labels.renderItem(e)}},{key:"renderPreview",value:function(){this.preview.render()}},{key:"render",value:function(){this.renderTheme(),this.renderHeader(),this.renderViewport(),this.renderPreview(),this.renderLabels()}}])&&S(t.prototype,i),n&&S(t,n),e}();i(1);console.log("app started");var _=0,E=window.location.search.split("?");E.length>1&&(_=+E[1]);new k({id:"TelegramChart",title:"Telegram Chart",axis:{x:{min:void 0,max:void 0,step:void 0}},viewbox:{start:.8,end:1},theme:0,chart:chart_data[_]})},function(e,t){}]);